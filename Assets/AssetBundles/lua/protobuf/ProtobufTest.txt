local oo = require "core/SimpleOO"
require "core/protobuf"

local ProtobufTest = oo.Class.Create()

function ProtobufTest:KernelLoaded(monoComponent, gameObject)
	self.monoComponent = monoComponent
	self.gameObject = gameObject
	self.transform = gameObject.transform

	local asset = ResourceMgr.Get("AssetBundles/protocol/MsgHead")

	local data = asset.bytes
	local buffer = SLua.ByteArray(data)

	protobuf.register(buffer)

	t = protobuf.decode("MsgHead", buffer)

	local head = {
		cmd = 101,
		sequence = 1
	}

	local code = protobuf.encode("MsgHead", head)
	local packet = LuaPacket()
	packet:WriteHead(code)

	networkService:Send(packet)
end

return ProtobufTest